{"version":3,"sources":["components/Admin/Vacancy dashboard/Dashboard.js","../node_modules/reactstrap/es/Table.js","utils/api/users.js","components/Admin/Vacancy dashboard/TableRow.js"],"names":["Dashboard","state","recruiters","companies","selectedRecruiter","selectedCompany","dashboardData","fetchRecruiters","a","getUsers","users","staff","filter","user","role_id","setState","fetchCompanies","getCompanies","companies_result","company","vacancies","indexOf","id","fetchCandidatesData","getCandidatesAmountByVacancies","data","sort","b","company_name","loading","className","handleRecruiterSelect","handleCompanySelect","this","prevProps","prevState","vacansiesAndCompaniesJSX","map","vacancyId","vacancy_id","key","vacancy","platform_name","conpanyName","recruiterName","user_name","quantity","style","display","justifyContent","maxWidth","marginBottom","marginTop","fontSize","alignSelf","color","xs","sm","md","lg","xl","value","options","isClearable","getOptionValue","getOptionLabel","name","placeholder","onChange","background","responsive","hover","Component","propTypes","PropTypes","string","cssModule","object","size","bordered","bool","borderless","striped","dark","oneOfType","tag","tagPropType","responsiveTag","innerRef","func","Table","props","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","table","React","createElement","_extends","ref","responsiveClassName","defaultProps","token","localStorage","getItem","fetch","method","headers","Authorization","then","response","ok","json","Error","statusText","partners","freelancers","freeLancers","catch","error","console","log","TableRow","companyId","recruiterId","find","recruiter","to","target"],"mappings":"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","file":"static/js/52.bc30752b.chunk.js","sourcesContent":["// Core;\nimport React, { Component } from \"react\";\nimport Select from \"react-select\";\nimport { Col, Row, Table, FormGroup } from \"reactstrap\";\n// Components\nimport TableRow from \"./TableRow\";\nimport { getUsers } from \"../../../utils/api/users\";\nimport { getCompanies } from \"../../../utils/api/company\";\nimport { getCandidatesAmountByVacancies } from \"../../../utils/api/candidates\";\n\nexport default class Dashboard extends Component {\n  state = {\n    recruiters: [],\n    companies: [],\n\n    selectedRecruiter: null,\n    selectedCompany: null,\n\n    dashboardData: null,\n  };\n\n  componentDidMount() {\n    this.fetchCompanies();\n    this.fetchRecruiters();\n    this.fetchCandidatesData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      this.state.selectedRecruiter !== prevState.selectedRecruiter ||\n      this.state.selectedCompany !== prevState.selectedCompany\n    ) {\n      this.fetchCandidatesData();\n    }\n\n    if (this.state.selectedRecruiter !== prevState.selectedRecruiter) {\n      this.fetchCompanies();\n    }\n  }\n\n  fetchRecruiters = async () => {\n    const users = await getUsers();\n\n    const recruiters = users.staff.filter((user) => user.role_id === 2);\n    this.setState({ recruiters });\n  };\n\n  fetchCompanies = async () => {\n    let companies_result = await getCompanies(0, 1, 1);\n    const {selectedRecruiter} = this.state;\n    const companies = companies_result.companies.filter((company) => company.vacancies > 0 &&\n      (selectedRecruiter !== null && company.recruiters.indexOf(selectedRecruiter.id) + 1 > 0 || selectedRecruiter === null));\n    this.setState({companies});\n  };\n\n  fetchCandidatesData = async () => {\n    const { selectedCompany, selectedRecruiter } = this.state;\n\n    const dashboardData = await getCandidatesAmountByVacancies(\n      selectedRecruiter ? selectedRecruiter.id : null,\n      selectedCompany ? selectedCompany.id : null\n    );\n\n    dashboardData.data.sort((a, b) =>\n      a.company_name > b.company_name ? 1 : -1\n    );\n\n    this.setState({ dashboardData });\n  };\n\n  loading = () => (\n    <div className='animated fadeIn pt-1 text-center'>Loading...</div>\n  );\n\n  handleRecruiterSelect = (selectedRecruiter) => {\n    this.setState({ selectedRecruiter });\n  };\n\n  handleCompanySelect = (selectedCompany) => {\n    this.setState({ selectedCompany });\n  };\n\n  render() {\n    const {\n      dashboardData,\n      recruiters,\n      companies,\n      selectedRecruiter,\n      selectedCompany,\n    } = this.state;\n\n    const vacansiesAndCompaniesJSX =\n      dashboardData &&\n      dashboardData.data.map((data) => {\n        return (\n          <TableRow\n            vacancyId={data.vacancy_id}\n            key={data.vacancy_id}\n            vacancy={data.platform_name}\n            conpanyName={data.company_name}\n            recruiterName={data.user_name}\n            quantity={data.quantity}\n            recruiters={recruiters}\n            companies={companies}\n          />\n        );\n      });\n\n    return (\n      <div className='animated fadeIn'>\n        <Row>\n          <Col\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              maxWidth: 180,\n              marginBottom: \"0.5rem\",\n            }}\n          >\n            <h1 style={{ marginBottom: 0, marginTop: 20, fontSize: 24 }}>\n              Dashboard\n            </h1>\n            <span\n              style={{\n                alignSelf: \"flex-end\",\n                color: \"var(--gray)\",\n              }}\n            ></span>\n          </Col>\n        </Row>\n        <Row>\n          <Col xs='12' sm='12' md='12' lg='3' xl='3'>\n            <FormGroup className='filter-select'>\n              <Select\n                style={{ marginBottom: 15 }}\n                value={selectedRecruiter}\n                options={recruiters}\n                isClearable\n                getOptionValue={(user) => user.id}\n                getOptionLabel={(user) => user.name}\n                placeholder='Recruiters'\n                onChange={this.handleRecruiterSelect}\n              />\n            </FormGroup>\n          </Col>\n          <Col xs='12' sm='12' md='12' lg='3' xl='3'>\n            <FormGroup className='filter-select'>\n              <Select\n                style={{ marginBottom: \"1rem\" }}\n                value={selectedCompany}\n                options={companies}\n                isClearable\n                getOptionValue={(company) => company.id}\n                getOptionLabel={(company) => company.name}\n                placeholder='Companies'\n                onChange={this.handleCompanySelect}\n              />\n            </FormGroup>\n          </Col>\n        </Row>\n        <Row>\n          <Col xs='12' md='12' xl='12'>\n            <Table style={{ background: \"var(--white)\" }} responsive hover>\n              <thead>\n                <tr>\n                  <th className='text-center'>Vacancies</th>\n                  <th className='text-center'>Company</th>\n                  <th className='text-center'>Recruiter</th>\n                  <th className='text-center'>Quantity</th>\n                </tr>\n              </thead>\n              <tbody>{vacansiesAndCompaniesJSX}</tbody>\n            </Table>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;","const URL = \"http://f2.uppeople.space/api\";\r\nconst getToken = () => localStorage.getItem(\"token\");\r\n\r\n/**\r\n * Fetches all users from an api\r\n *\r\n * @returns {Promise} Promise object represents operation result\r\n */\r\nexport const getUsers = () => {\r\n  const token = getToken();\r\n\r\n  return fetch(`${URL}/admin/all-staff`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: \"Bearer \" + token,\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  })\r\n    .then(response => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n      throw new Error(`Error while fetching: ${response.statusText}`);\r\n    })\r\n    .then(data => {\r\n      const users = {\r\n        staff: data.users,\r\n        partners: data.partners,\r\n        freelancers: data.freeLancers\r\n      };\r\n\r\n      return users;\r\n    })\r\n    .catch(error => console.log(\"error in fetch: \", error));\r\n};\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst TableRow = ({\r\n  vacancyId,\r\n  vacancy,\r\n  quantity,\r\n  recruiterName,\r\n  conpanyName,\r\n  recruiters,\r\n  companies,\r\n}) => {\r\n  let companyId;\r\n  companies.find((company) => {\r\n    if (company.name === conpanyName) companyId = company.id;\r\n  });\r\n\r\n  let recruiterId;\r\n  recruiters.find((recruiter) => {\r\n    if (recruiter.name === recruiterName) recruiterId = recruiter.id;\r\n  });\r\n\r\n  return (\r\n    <tr>\r\n      <td className='text-center'>\r\n        <Link to={`/vacancies/${vacancyId}`} target='_blank'>\r\n          {\" \"}\r\n          {vacancy}\r\n        </Link>\r\n      </td>\r\n      <td className='text-center'>\r\n        <Link to={`/companies/${companyId}`} target='_blank'>\r\n          {\" \"}\r\n          {conpanyName}\r\n        </Link>\r\n      </td>\r\n      <td className='text-center'>\r\n        <Link to={`/users/${recruiterId}`} target='_blank'>\r\n          {recruiterName}\r\n        </Link>\r\n      </td>\r\n      <td className='text-center'>\r\n        <div>{quantity}</div>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\nexport default TableRow;\r\n"],"sourceRoot":""}