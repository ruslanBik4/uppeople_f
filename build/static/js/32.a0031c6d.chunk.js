(this["webpackJsonp@coreui/coreui-pro-react-admin-template"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template"]||[]).push([[32],{1058:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return x}));var r=a(289),n=a.n(r),c=a(290),s=a(30),i=a(31),l=a(33),o=a(32),u=a(0),m=a.n(u),d=a(323),p=a(504),f=a(505),h=a(419),b=a(396),v=a(694),y=a(385),g=a(303),E=a(426),x=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={recruiters:[],companies:[],selectedRecruiter:null,selectedCompany:null,recruitersIsClearable:!0,dashboardData:null},e.fetchRecruiters=Object(c.a)(n.a.mark((function t(){var a,r,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.a)();case 2:void 0!==(a=t.sent).staff?(r=a.staff.filter((function(e){return 2===e.role_id})),e.setState({recruiters:r})):void 0!==a.recruiters&&(c=a.recruiters,e.setState({recruiters:c}),e.setState({selectedRecruiter:c[0]}),e.setState({recruitersIsClearable:!1}));case 4:case"end":return t.stop()}}),t)}))),e.fetchCompanies=Object(c.a)(n.a.mark((function t(){var a,r,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.k)(0,1,1);case 2:a=t.sent,r=e.state.selectedRecruiter,void 0!==a&&(c=a.companies.filter((function(e){return e.vacancies>0&&(null!==r&&e.recruiters.indexOf(r.id)+1>0||null===r)})),e.setState({companies:c}));case 5:case"end":return t.stop()}}),t)}))),e.fetchCandidatesData=Object(c.a)(n.a.mark((function t(){var a,r,c,s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,r=a.selectedCompany,c=a.selectedRecruiter,t.next=3,Object(E.g)(c?c.id:null,r?r.id:null);case 3:void 0!==(s=t.sent)&&(s.data.sort((function(e,t){return e.company_name>t.company_name?1:-1})),e.setState({dashboardData:s}));case 5:case"end":return t.stop()}}),t)}))),e.loading=function(){return m.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},e.handleRecruiterSelect=function(t){e.setState({selectedRecruiter:t})},e.handleCompanySelect=function(t){e.setState({selectedCompany:t})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.fetchCompanies(),this.fetchRecruiters(),this.fetchCandidatesData()}},{key:"componentDidUpdate",value:function(e,t){this.state.selectedRecruiter===t.selectedRecruiter&&this.state.selectedCompany===t.selectedCompany||this.fetchCandidatesData(),this.state.selectedRecruiter!==t.selectedRecruiter&&this.fetchCompanies()}},{key:"render",value:function(){var e=this.state,t=e.dashboardData,a=e.recruiters,r=e.companies,n=e.selectedRecruiter,c=e.recruitersIsClearable,s=e.selectedCompany,i=t&&t.data.map((function(e){return m.a.createElement(v.a,{vacancyId:e.vacancy_id,key:e.vacancy_id,vacancy:e.platform_name,conpanyName:e.company_name,recruiterName:e.user_name,quantity:e.quantity,recruiters:a,companies:r})}));return m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(p.a,null,m.a.createElement(f.a,{style:{display:"flex",justifyContent:"space-between",maxWidth:180,marginBottom:"0.5rem"}},m.a.createElement("h1",{style:{marginBottom:0,marginTop:20,fontSize:24}},"Dashboard"),m.a.createElement("span",{style:{alignSelf:"flex-end",color:"var(--gray)"}}))),m.a.createElement(p.a,null,m.a.createElement(f.a,{xs:"12",sm:"12",md:"12",lg:"3",xl:"3"},m.a.createElement(h.a,{className:"filter-select"},m.a.createElement(d.a,{style:{marginBottom:15},value:n,options:a,isClearable:c,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},placeholder:"Recruiters",onChange:this.handleRecruiterSelect}))),m.a.createElement(f.a,{xs:"12",sm:"12",md:"12",lg:"3",xl:"3"},m.a.createElement(h.a,{className:"filter-select"},m.a.createElement(d.a,{style:{marginBottom:"1rem"},value:s,options:r,isClearable:!0,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},placeholder:"Companies",onChange:this.handleCompanySelect})))),m.a.createElement(p.a,null,m.a.createElement(f.a,{xs:"12",md:"12",xl:"12"},m.a.createElement(b.a,{style:{background:"var(--white)"},responsive:!0,hover:!0},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",{className:"text-center"},"Vacancies"),m.a.createElement("th",{className:"text-center"},"Company"),m.a.createElement("th",{className:"text-center"},"Recruiter"),m.a.createElement("th",{className:"text-center"},"Quantity"))),m.a.createElement("tbody",null,i)))))}}]),a}(u.Component)},385:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r=function(){var e=localStorage.getItem("token");return fetch("".concat("http://f2.uppeople.space/api","/admin/all-staff"),{method:"GET",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json();throw new Error("Error while fetching: ".concat(e.statusText))})).then((function(e){return{staff:e.users,partners:e.partners,freelancers:e.freeLancers,recruiters:e.recruiters}})).catch((function(e){return console.log("error in fetch: ",e)}))}},396:function(e,t,a){"use strict";var r=a(24),n=a(106),c=a(0),s=a.n(c),i=a(1),l=a.n(i),o=a(105),u=a.n(o),m=a(51),d={className:l.a.string,cssModule:l.a.object,size:l.a.string,bordered:l.a.bool,borderless:l.a.bool,striped:l.a.bool,dark:l.a.bool,hover:l.a.bool,responsive:l.a.oneOfType([l.a.bool,l.a.string]),tag:m.o,responsiveTag:m.o,innerRef:l.a.oneOfType([l.a.func,l.a.string,l.a.object])},p=function(e){var t=e.className,a=e.cssModule,c=e.size,i=e.bordered,l=e.borderless,o=e.striped,d=e.dark,p=e.hover,f=e.responsive,h=e.tag,b=e.responsiveTag,v=e.innerRef,y=Object(n.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),g=Object(m.k)(u()(t,"table",!!c&&"table-"+c,!!i&&"table-bordered",!!l&&"table-borderless",!!o&&"table-striped",!!d&&"table-dark",!!p&&"table-hover"),a),E=s.a.createElement(h,Object(r.a)({},y,{ref:v,className:g}));if(f){var x=Object(m.k)(!0===f?"table-responsive":"table-responsive-"+f,a);return s.a.createElement(b,{className:x},E)}return E};p.propTypes=d,p.defaultProps={tag:"table",responsiveTag:"div"},t.a=p},694:function(e,t,a){"use strict";var r=a(0),n=a.n(r),c=a(807);t.a=function(e){var t,a,r=e.vacancyId,s=e.vacancy,i=e.quantity,l=e.recruiterName,o=e.conpanyName,u=e.recruiters;return e.companies.find((function(e){e.name===o&&(t=e.id)})),u.find((function(e){e.name===l&&(a=e.id)})),n.a.createElement("tr",null,n.a.createElement("td",{className:"text-center"},n.a.createElement(c.a,{to:"/vacancies/".concat(r),target:"_blank"}," ",s)),n.a.createElement("td",{className:"text-center"},n.a.createElement(c.a,{to:"/companies/".concat(t),target:"_blank"}," ",o)),n.a.createElement("td",{className:"text-center"},n.a.createElement(c.a,{to:"/users/".concat(a),target:"_blank"},l)),n.a.createElement("td",{className:"text-center"},n.a.createElement("div",null,i)))}}}]);
//# sourceMappingURL=32.a0031c6d.chunk.js.map