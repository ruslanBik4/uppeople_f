(this["webpackJsonp@coreui/coreui-pro-react-admin-template"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template"]||[]).push([[52],{1060:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return x}));var n=a(288),r=a.n(n),c=a(289),s=a(30),o=a(31),l=a(33),i=a(32),u=a(0),m=a.n(u),d=a(324),p=a(505),f=a(506),h=a(421),b=a(384),v=a(699),y=a(391),g=a(302),E=a(430),x=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={recruiters:[],companies:[],selectedRecruiter:null,selectedCompany:null,dashboardData:null},e.fetchRecruiters=Object(c.a)(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.a)();case 2:a=t.sent,n=a.staff.filter((function(e){return 2===e.role_id})),e.setState({recruiters:n});case 5:case"end":return t.stop()}}),t)}))),e.fetchCompanies=Object(c.a)(r.a.mark((function t(){var a,n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.k)(0,1,1);case 2:a=t.sent,n=e.state.selectedRecruiter,c=a.companies.filter((function(e){return e.vacancies>0&&(null!==n&&e.recruiters.indexOf(n.id)+1>0||null===n)})),e.setState({companies:c});case 6:case"end":return t.stop()}}),t)}))),e.fetchCandidatesData=Object(c.a)(r.a.mark((function t(){var a,n,c,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.selectedCompany,c=a.selectedRecruiter,t.next=3,Object(E.g)(c?c.id:null,n?n.id:null);case 3:(s=t.sent).data.sort((function(e,t){return e.company_name>t.company_name?1:-1})),e.setState({dashboardData:s});case 6:case"end":return t.stop()}}),t)}))),e.loading=function(){return m.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},e.handleRecruiterSelect=function(t){e.setState({selectedRecruiter:t})},e.handleCompanySelect=function(t){e.setState({selectedCompany:t})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchCompanies(),this.fetchRecruiters(),this.fetchCandidatesData()}},{key:"componentDidUpdate",value:function(e,t){this.state.selectedRecruiter===t.selectedRecruiter&&this.state.selectedCompany===t.selectedCompany||this.fetchCandidatesData(),this.state.selectedRecruiter!==t.selectedRecruiter&&this.fetchCompanies()}},{key:"render",value:function(){var e=this.state,t=e.dashboardData,a=e.recruiters,n=e.companies,r=e.selectedRecruiter,c=e.selectedCompany,s=t&&t.data.map((function(e){return m.a.createElement(v.a,{vacancyId:e.vacancy_id,key:e.vacancy_id,vacancy:e.platform_name,conpanyName:e.company_name,recruiterName:e.user_name,quantity:e.quantity,recruiters:a,companies:n})}));return m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(p.a,null,m.a.createElement(f.a,{style:{display:"flex",justifyContent:"space-between",maxWidth:180,marginBottom:"0.5rem"}},m.a.createElement("h1",{style:{marginBottom:0,marginTop:20,fontSize:24}},"Dashboard"),m.a.createElement("span",{style:{alignSelf:"flex-end",color:"var(--gray)"}}))),m.a.createElement(p.a,null,m.a.createElement(f.a,{xs:"12",sm:"12",md:"12",lg:"3",xl:"3"},m.a.createElement(h.a,{className:"filter-select"},m.a.createElement(d.a,{style:{marginBottom:15},value:r,options:a,isClearable:!0,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},placeholder:"Recruiters",onChange:this.handleRecruiterSelect}))),m.a.createElement(f.a,{xs:"12",sm:"12",md:"12",lg:"3",xl:"3"},m.a.createElement(h.a,{className:"filter-select"},m.a.createElement(d.a,{style:{marginBottom:"1rem"},value:c,options:n,isClearable:!0,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},placeholder:"Companies",onChange:this.handleCompanySelect})))),m.a.createElement(p.a,null,m.a.createElement(f.a,{xs:"12",md:"12",xl:"12"},m.a.createElement(b.a,{style:{background:"var(--white)"},responsive:!0,hover:!0},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",{className:"text-center"},"Vacancies"),m.a.createElement("th",{className:"text-center"},"Company"),m.a.createElement("th",{className:"text-center"},"Recruiter"),m.a.createElement("th",{className:"text-center"},"Quantity"))),m.a.createElement("tbody",null,s)))))}}]),a}(u.Component)},384:function(e,t,a){"use strict";var n=a(24),r=a(106),c=a(0),s=a.n(c),o=a(1),l=a.n(o),i=a(105),u=a.n(i),m=a(51),d={className:l.a.string,cssModule:l.a.object,size:l.a.string,bordered:l.a.bool,borderless:l.a.bool,striped:l.a.bool,dark:l.a.bool,hover:l.a.bool,responsive:l.a.oneOfType([l.a.bool,l.a.string]),tag:m.o,responsiveTag:m.o,innerRef:l.a.oneOfType([l.a.func,l.a.string,l.a.object])},p=function(e){var t=e.className,a=e.cssModule,c=e.size,o=e.bordered,l=e.borderless,i=e.striped,d=e.dark,p=e.hover,f=e.responsive,h=e.tag,b=e.responsiveTag,v=e.innerRef,y=Object(r.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),g=Object(m.k)(u()(t,"table",!!c&&"table-"+c,!!o&&"table-bordered",!!l&&"table-borderless",!!i&&"table-striped",!!d&&"table-dark",!!p&&"table-hover"),a),E=s.a.createElement(h,Object(n.a)({},y,{ref:v,className:g}));if(f){var x=Object(m.k)(!0===f?"table-responsive":"table-responsive-"+f,a);return s.a.createElement(b,{className:x},E)}return E};p.propTypes=d,p.defaultProps={tag:"table",responsiveTag:"div"},t.a=p},391:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(){var e=localStorage.getItem("token");return fetch("".concat("http://f2.uppeople.space/api","/admin/all-staff"),{method:"GET",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json();throw new Error("Error while fetching: ".concat(e.statusText))})).then((function(e){return{staff:e.users,partners:e.partners,freelancers:e.freeLancers}})).catch((function(e){return console.log("error in fetch: ",e)}))}},699:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(814);t.a=function(e){var t,a,n=e.vacancyId,s=e.vacancy,o=e.quantity,l=e.recruiterName,i=e.conpanyName,u=e.recruiters;return e.companies.find((function(e){e.name===i&&(t=e.id)})),u.find((function(e){e.name===l&&(a=e.id)})),r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},r.a.createElement(c.a,{to:"/vacancies/".concat(n),target:"_blank"}," ",s)),r.a.createElement("td",{className:"text-center"},r.a.createElement(c.a,{to:"/companies/".concat(t),target:"_blank"}," ",i)),r.a.createElement("td",{className:"text-center"},r.a.createElement(c.a,{to:"/users/".concat(a),target:"_blank"},l)),r.a.createElement("td",{className:"text-center"},r.a.createElement("div",null,o)))}}}]);
//# sourceMappingURL=52.bc30752b.chunk.js.map